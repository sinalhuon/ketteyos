(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56909,e=>{"use strict";let a=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>a],56909)},37727,e=>{"use strict";let a=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>a],37727)},69074,e=>{"use strict";let a=(0,e.i(75254).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>a],69074)},73708,e=>{"use strict";let a=(0,e.i(75254).default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["Image",()=>a],73708)},7585,e=>{"use strict";var a=e.i(43476),t=e.i(71645),r=e.i(69074),s=e.i(37727);function l({currentLogo:e,onUploadSuccess:l,onRemoveSuccess:d}){let[o,i]=(0,t.useState)(!1),[n,c]=(0,t.useState)(!1),g=async e=>{if(e){if(!["image/jpeg","image/jpg","image/png","image/webp","image/svg+xml"].includes(e.type))return void alert("Invalid file type. Please upload JPG, PNG, SVG, or WebP.");if(e.size>2097152)return void alert("File too large. Maximum size is 2MB.");i(!0);try{let a=new FormData;a.append("file",e);let t=await fetch("/api/settings/logo",{method:"POST",body:a}),r=await t.json();if(!t.ok)throw Error(r.error||"Upload failed");l(r.logoUrl),alert("Logo uploaded successfully!")}catch(e){console.error("Upload error:",e),alert(e instanceof Error?e.message:"Failed to upload logo")}finally{i(!1)}}},p=async()=>{if(confirm("Are you sure you want to remove the logo?")){i(!0);try{let e=await fetch("/api/settings/logo",{method:"DELETE"}),a=await e.json();if(!e.ok)throw Error(a.error||"Failed to remove logo");d(),alert("Logo removed successfully!")}catch(e){console.error("Remove error:",e),alert(e instanceof Error?e.message:"Failed to remove logo")}finally{i(!1)}}},x=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?c(!0):"dragleave"===e.type&&c(!1)};return(0,a.jsxs)("div",{className:"space-y-4",children:[e&&(0,a.jsxs)("div",{className:"relative w-32 h-32 mx-auto",children:[(0,a.jsx)("img",{src:e,alt:"App Logo",className:"w-full h-full object-cover rounded-lg border-2 border-gray-300 dark:border-gray-700"}),(0,a.jsx)("button",{onClick:p,disabled:o,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition disabled:opacity-50",children:(0,a.jsx)(s.X,{size:16})})]}),(0,a.jsxs)("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition ${n?"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/10":"border-gray-300 dark:border-gray-700"} ${o?"opacity-50 pointer-events-none":""}`,onDragEnter:x,onDragLeave:x,onDragOver:x,onDrop:e=>{e.preventDefault(),e.stopPropagation(),c(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&g(e.dataTransfer.files[0])},children:[(0,a.jsx)("input",{type:"file",id:"logo-upload",className:"hidden",accept:"image/jpeg,image/jpg,image/png,image/webp,image/svg+xml",onChange:e=>{e.target.files&&e.target.files[0]&&g(e.target.files[0])},disabled:o}),(0,a.jsx)("label",{htmlFor:"logo-upload",className:"cursor-pointer",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(r.Upload,{size:32,className:"text-gray-400"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Drag & drop or ",(0,a.jsx)("span",{className:"text-yellow-600 hover:text-yellow-700",children:"browse"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"JPG, PNG or WebP (max 5MB)"})]})})]}),o&&(0,a.jsx)("div",{className:"text-center text-sm text-gray-500",children:"Uploading..."})]})}var d=e.i(75254);let o=(0,d.default)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]);var i=e.i(73708),n=e.i(56909);let c=(0,d.default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var g=e.i(18566);function p(){let e=(0,g.useRouter)(),[r,s]=(0,t.useState)(!0),[d,p]=(0,t.useState)(!1),[x,h]=(0,t.useState)(null),[m,u]=(0,t.useState)("");(0,t.useEffect)(()=>{y()},[]);let y=async()=>{try{let a=await fetch("/api/settings"),t=await a.json();a.ok?(h(t.settings),u(t.settings.appName||"KETTEKYUOS")):403===a.status&&(alert("Access denied: Super admin only"),e.push("/admin/dashboard"))}catch(e){console.error("Failed to fetch settings:",e)}finally{s(!1)}},b=async e=>{e.preventDefault(),p(!0);try{let e=await fetch("/api/settings",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({appName:m})}),a=await e.json();if(!e.ok)throw Error(a.error||"Failed to update settings");alert("Settings updated successfully! Refresh the page to see changes."),h(a.settings)}catch(e){console.error("Update error:",e),alert(e instanceof Error?e.message:"Failed to update settings")}finally{p(!1)}};return r?(0,a.jsx)("div",{className:"p-8 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-gray-500",children:"Loading..."})}):(0,a.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[(0,a.jsxs)("header",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"App Settings"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Configure your application branding and settings"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-1",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-[#111] rounded-2xl shadow-sm border border-gray-200 dark:border-[#222] p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(i.Image,{size:20}),"App Logo"]}),(0,a.jsx)(l,{currentLogo:x?.appLogo,onUploadSuccess:e=>h({...x,appLogo:e}),onRemoveSuccess:()=>h({...x,appLogo:null})}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/10 rounded-lg border border-blue-200 dark:border-blue-800",children:(0,a.jsxs)("p",{className:"text-xs text-blue-700 dark:text-blue-300 flex items-start gap-2",children:[(0,a.jsx)(c,{size:14,className:"mt-0.5 flex-shrink-0"}),(0,a.jsx)("span",{children:"Recommended size: 200x200px. Supports JPG, PNG, SVG, WebP (max 2MB)"})]})})]}),x?.updatedAt&&(0,a.jsxs)("div",{className:"bg-white dark:bg-[#111] rounded-2xl shadow-sm border border-gray-200 dark:border-[#222] p-6 mt-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Last Updated"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(x.updatedAt).toLocaleString()})]})]}),(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-[#111] rounded-2xl shadow-sm border border-gray-200 dark:border-[#222] p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(o,{size:20}),"App Information"]}),(0,a.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Application Name"}),(0,a.jsx)("input",{type:"text",value:m,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"KETTEKYUOS",maxLength:50,required:!0}),(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"This name will appear in the admin portal sidebar and throughout the application."})]}),(0,a.jsxs)("button",{type:"submit",disabled:d,className:"w-full bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg font-medium transition disabled:opacity-50 flex items-center justify-center gap-2",children:[(0,a.jsx)(n.Save,{size:18}),d?"Saving...":"Save Changes"]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-[#111] rounded-2xl shadow-sm border border-gray-200 dark:border-[#222] p-6 mt-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Preview"}),(0,a.jsx)("div",{className:"bg-gray-50 dark:bg-[#0a0a0a] rounded-lg p-4 border border-gray-200 dark:border-[#222]",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[x?.appLogo?(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg overflow-hidden border-2 border-gray-300 dark:border-gray-700",children:(0,a.jsx)("img",{src:x.appLogo,alt:"App Logo",className:"w-full h-full object-cover"})}):(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-lg flex items-center justify-center shadow-lg shadow-yellow-500/20 text-white",children:(0,a.jsx)(o,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold tracking-wide text-gray-900 dark:text-white",children:m||"KETTEKYUOS"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-widest",children:"Admin Portal"})]})]})})]})]})]})]})}e.s(["default",()=>p],7585)}]);