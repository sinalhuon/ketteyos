(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56909,e=>{"use strict";let t=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},37727,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},69074,e=>{"use strict";let t=(0,e.i(75254).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>t],69074)},85663,e=>{"use strict";let t=(0,e.i(75254).default)("layout-template",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);e.s(["LayoutTemplate",()=>t],85663)},57283,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(18566),l=e.i(71689),s=e.i(56909),d=e.i(85663),i=e.i(22016),o=e.i(69074),n=e.i(37727),c=e.i(31278);function x({currentVideoUrl:e,onUploadSuccess:r,onRemoveSuccess:l,label:s="Upload Video"}){let[d,i]=(0,a.useState)(!1),[x,u]=(0,a.useState)(null),[p,y]=(0,a.useState)("upload"),[g,h]=(0,a.useState)(""),b=(0,a.useRef)(null),f=async e=>{let t=e.target.files?.[0];if(t){if(!t.type.startsWith("video/"))return void u("Please upload a valid video file (MP4, MOV, etc.)");if(t.size>0x3200000)return void u("Video size must be less than 50MB");u(null),i(!0);try{let e=new FormData;e.append("file",t),e.append("folder","templates/videos");let a=await fetch("/api/upload",{method:"POST",body:e});if(!a.ok)throw Error("Upload failed");let l=await a.json();r(l.url)}catch(e){console.error(e),u("Failed to upload video. Please try again.")}finally{i(!1),b.current&&(b.current.value="")}}},v=async()=>{e&&l()};return(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:s}),!e&&(0,t.jsxs)("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[(0,t.jsx)("button",{type:"button",onClick:()=>y("upload"),className:`px-3 py-1 text-xs font-medium rounded-md transition ${"upload"===p?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Upload"}),(0,t.jsx)("button",{type:"button",onClick:()=>y("url"),className:`px-3 py-1 text-xs font-medium rounded-md transition ${"url"===p?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Link"})]})]}),x&&(0,t.jsxs)("div",{className:"mb-3 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg flex items-center gap-2",children:[(0,t.jsx)(n.X,{size:16})," ",x]}),e?(0,t.jsxs)("div",{className:"relative rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700 bg-black group",children:[(0,t.jsx)("video",{src:e,className:"w-full h-48 object-cover",controls:!0,playsInline:!0,preload:"metadata"}),(0,t.jsx)("div",{className:"absolute top-2 right-2 flex gap-2",children:(0,t.jsx)("button",{onClick:v,type:"button",className:"p-2 bg-red-500 text-white rounded-lg shadow-lg hover:bg-red-600 transition",title:"Remove video",children:(0,t.jsx)(m,{size:16})})}),(0,t.jsx)("div",{className:"absolute bottom-2 left-2 bg-black/50 text-white text-xs px-2 py-1 rounded backdrop-blur-sm truncate max-w-[200px]",children:e.split("/").pop()})]}):"upload"===p?(0,t.jsx)("div",{onClick:()=>b.current?.click(),className:`
                        border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl p-8
                        flex flex-col items-center justify-center cursor-pointer transition-all
                        hover:border-yellow-500 hover:bg-yellow-50 dark:hover:bg-yellow-900/10
                        ${d?"opacity-50 pointer-events-none":""}
                    `,children:d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Loader2,{size:32,className:"text-yellow-600 animate-spin mb-3"}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Uploading..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center text-yellow-600 mb-3",children:(0,t.jsx)(o.Upload,{size:24})}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Click to upload video"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"MP4, MOV up to 50MB"})]})}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"url",placeholder:"Enter video URL (e.g. from ImageKit)",value:g,onChange:e=>h(e.target.value),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-[#0a0a0a] text-sm focus:ring-2 focus:ring-yellow-500 focus:border-transparent"}),(0,t.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),g&&(r(g),h(""))},disabled:!g,className:"px-4 py-2 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-lg text-sm font-medium hover:opacity-90 disabled:opacity-50 transition",children:"Add"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Paste a direct link to a video file (.mp4, .mov)"})]}),(0,t.jsx)("input",{type:"file",ref:b,onChange:f,accept:"video/*",className:"hidden"})]})}function m({size:e,className:a}){return(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e||24,height:e||24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,t.jsx)("path",{d:"M3 6h18"}),(0,t.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),(0,t.jsx)("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),(0,t.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,t.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}function u(){let e=(0,r.useRouter)(),o=(0,r.useParams)().id,[n,c]=(0,a.useState)(!0),[m,u]=(0,a.useState)(!1),[p,y]=(0,a.useState)(null),[g,h]=(0,a.useState)({name:"",description:"",previewUrl:"",introVideoUrl:"",transitionVideoUrl:"",backgroundVideoUrl:"",effectLayerUrl:"",effectLayerOpacity:1,effectLayerBlendMode:"screen",isActive:!0});(0,a.useEffect)(()=>{b()},[o]);let b=async()=>{try{let t=await fetch(`/api/admin/templates/${o}`),a=await t.json();t.ok?(y(a.template),h({name:a.template.name,description:a.template.description||"",previewUrl:a.template.previewUrl||"",introVideoUrl:a.template.introVideoUrl||"",transitionVideoUrl:a.template.transitionVideoUrl||"",backgroundVideoUrl:a.template.backgroundVideoUrl||"",effectLayerUrl:a.template.effectLayerUrl||"",effectLayerOpacity:a.template.effectLayerOpacity??1,effectLayerBlendMode:a.template.effectLayerBlendMode||"screen",isActive:a.template.isActive})):(alert("Failed to load template"),e.push("/admin/templates"))}catch(e){console.error("Failed to fetch template:",e)}finally{c(!1)}},f=async t=>{t.preventDefault(),u(!0);try{let t=await fetch(`/api/admin/templates/${o}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}),a=await t.json();if(!t.ok)throw Error(a.error||"Failed to update template");alert("Template updated successfully!"),e.push("/admin/templates")}catch(e){console.error("Update template error:",e),alert(e instanceof Error?e.message:"Failed to update template")}finally{u(!1)}};return n?(0,t.jsx)("div",{className:"p-8 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-gray-500",children:"Loading..."})}):(0,t.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)(i.default,{href:"/admin/templates",className:"inline-flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition",children:[(0,t.jsx)(l.ArrowLeft,{size:20}),"Back to Templates"]})}),(0,t.jsxs)("header",{className:"mb-8 flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Edit Template"}),(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Update template assets and details"})]}),(0,t.jsxs)("div",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-800 rounded-lg text-sm font-mono text-gray-500",children:["ID: ",p?.codeKey]})]}),(0,t.jsx)("div",{className:"bg-white dark:bg-[#111] rounded-2xl shadow-sm border border-gray-200 dark:border-[#222] p-6",children:(0,t.jsxs)("form",{onSubmit:f,className:"space-y-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Template Name"}),(0,t.jsx)("input",{type:"text",value:g.name,onChange:e=>h({...g,name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-yellow-500 focus:border-transparent",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),(0,t.jsxs)("label",{className:"flex items-center gap-3 p-2 border border-gray-300 dark:border-gray-700 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-[#1a1a1a]",children:[(0,t.jsx)("input",{type:"checkbox",checked:g.isActive,onChange:e=>h({...g,isActive:e.target.checked}),className:"w-5 h-5 text-yellow-600 rounded focus:ring-yellow-500"}),(0,t.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Active (Visible to users)"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),(0,t.jsx)("textarea",{value:g.description,onChange:e=>h({...g,description:e.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-yellow-500 focus:border-transparent"})]}),(0,t.jsx)("div",{className:"border-t border-gray-200 dark:border-[#222] my-6"}),(0,t.jsxs)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,t.jsx)(d.LayoutTemplate,{size:20,className:"text-yellow-600"}),"Video Assets"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsx)(x,{label:"Intro Video (First Screen)",currentVideoUrl:g.introVideoUrl,onUploadSuccess:e=>h(t=>({...t,introVideoUrl:e})),onRemoveSuccess:()=>h(e=>({...e,introVideoUrl:""}))}),(0,t.jsx)(x,{label:"Transition Video (Middle)",currentVideoUrl:g.transitionVideoUrl,onUploadSuccess:e=>h(t=>({...t,transitionVideoUrl:e})),onRemoveSuccess:()=>h(e=>({...e,transitionVideoUrl:""}))}),(0,t.jsx)(x,{label:"Background Video (Second Screen)",currentVideoUrl:g.backgroundVideoUrl,onUploadSuccess:e=>h(t=>({...t,backgroundVideoUrl:e})),onRemoveSuccess:()=>h(e=>({...e,backgroundVideoUrl:""}))}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(x,{label:"Visual Effect Layer (Overlay)",currentVideoUrl:g.effectLayerUrl,onUploadSuccess:e=>h(t=>({...t,effectLayerUrl:e})),onRemoveSuccess:()=>h(e=>({...e,effectLayerUrl:""}))}),g.effectLayerUrl&&(0,t.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-[#1a1a1a] rounded-lg border border-gray-200 dark:border-[#333] space-y-4",children:[(0,t.jsx)("h4",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:"Effect Settings"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Opacity"}),(0,t.jsxs)("span",{className:"text-xs font-mono text-gray-500",children:[Math.round(100*g.effectLayerOpacity),"%"]})]}),(0,t.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:g.effectLayerOpacity,onChange:e=>h(t=>({...t,effectLayerOpacity:parseFloat(e.target.value)})),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 accent-yellow-600"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Blend Mode"}),(0,t.jsxs)("select",{value:g.effectLayerBlendMode,onChange:e=>h(t=>({...t,effectLayerBlendMode:e.target.value})),className:"w-full px-3 py-1.5 text-sm bg-white dark:bg-[#0a0a0a] border border-gray-300 dark:border-gray-700 rounded-md focus:ring-1 focus:ring-yellow-500 focus:outline-none",children:[(0,t.jsx)("option",{value:"screen",children:"Screen (Best for Black BG)"}),(0,t.jsx)("option",{value:"overlay",children:"Overlay"}),(0,t.jsx)("option",{value:"lighten",children:"Lighten"}),(0,t.jsx)("option",{value:"plus-lighter",children:"Plus Lighter"}),(0,t.jsx)("option",{value:"normal",children:"Normal"}),(0,t.jsx)("option",{value:"multiply",children:"Multiply (Darken)"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-6 border-t border-gray-200 dark:border-[#222]",children:[(0,t.jsx)("button",{type:"button",onClick:()=>e.back(),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#1a1a1a] transition",children:"Cancel"}),(0,t.jsxs)("button",{type:"submit",disabled:m,className:"flex-1 bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg font-medium transition disabled:opacity-50 flex items-center justify-center gap-2",children:[(0,t.jsx)(s.Save,{size:18}),m?"Saving Changes...":"Save Template"]})]})]})})]})}e.s(["default",()=>u],57283)}]);