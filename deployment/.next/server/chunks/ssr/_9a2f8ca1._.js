module.exports=[35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},33508,a=>{"use strict";let b=(0,a.i(70106).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],33508)},73320,a=>{"use strict";let b=(0,a.i(70106).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);a.s(["Upload",()=>b],73320)},46842,a=>{"use strict";let b=(0,a.i(70106).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],46842)},92258,a=>{"use strict";let b=(0,a.i(70106).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);a.s(["Mail",()=>b],92258)},3314,a=>{"use strict";let b=(0,a.i(70106).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);a.s(["Shield",()=>b],3314)},43108,a=>{"use strict";let b=(0,a.i(70106).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["Lock",()=>b],43108)},41675,a=>{"use strict";let b=(0,a.i(70106).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},40222,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(73320),e=a.i(33508),f=a.i(46842),g=a.i(71987);function h({currentImage:a,onUploadSuccess:h,onRemoveSuccess:i}){let[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(a||null),[n,o]=(0,c.useState)(!1),p=(0,c.useRef)(null),q=async b=>{if(!b)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(b.type))return void alert("Invalid file type. Only JPG, PNG, and WebP are allowed.");if(b.size>5242880)return void alert("File too large. Maximum size is 5MB.");let c=new FileReader;c.onloadend=()=>{m(c.result)},c.readAsDataURL(b),k(!0);try{let a=new FormData;a.append("file",b);let c=await fetch("/api/profile/image",{method:"POST",body:a}),d=await c.json();if(!c.ok)throw Error(d.error||"Upload failed");h(d.imageUrl)}catch(b){console.error("Upload error:",b),alert(b instanceof Error?b.message:"Failed to upload image"),m(a||null)}finally{k(!1)}},r=async()=>{if(confirm("Are you sure you want to remove your profile image?")){k(!0);try{let a=await fetch("/api/profile/image",{method:"DELETE"}),b=await a.json();if(!a.ok)throw Error(b.error||"Failed to remove image");m(null),i()}catch(a){console.error("Remove error:",a),alert(a instanceof Error?a.message:"Failed to remove image")}finally{k(!1)}}},s=a=>{a.preventDefault(),a.stopPropagation(),"dragenter"===a.type||"dragover"===a.type?o(!0):"dragleave"===a.type&&o(!1)};return(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsxs)("div",{className:"relative",children:[l?(0,b.jsx)("div",{className:"relative w-32 h-32 rounded-full overflow-hidden border-4 border-gray-200 dark:border-gray-700",children:(0,b.jsx)(g.default,{src:l,alt:"Profile",fill:!0,className:"object-cover"})}):(0,b.jsx)("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-yellow-400 to-yellow-600 flex items-center justify-center text-white border-4 border-gray-200 dark:border-gray-700",children:(0,b.jsx)(f.User,{size:48})}),l&&(0,b.jsx)("button",{onClick:r,disabled:j,className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition disabled:opacity-50",title:"Remove image",children:(0,b.jsx)(e.X,{size:16})})]}),(0,b.jsxs)("div",{className:`relative border-2 border-dashed rounded-lg p-6 text-center transition ${n?"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/10":"border-gray-300 dark:border-gray-700"}`,onDragEnter:s,onDragLeave:s,onDragOver:s,onDrop:a=>{a.preventDefault(),a.stopPropagation(),o(!1),a.dataTransfer.files&&a.dataTransfer.files[0]&&q(a.dataTransfer.files[0])},children:[(0,b.jsx)("input",{ref:p,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:a=>a.target.files&&q(a.target.files[0]),className:"hidden"}),(0,b.jsx)(d.Upload,{className:"mx-auto mb-2 text-gray-400",size:32}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Drag & drop or"," ",(0,b.jsx)("button",{onClick:()=>p.current?.click(),disabled:j,className:"text-yellow-600 hover:text-yellow-700 font-medium disabled:opacity-50",children:"browse"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"JPG, PNG or WebP (max 5MB)"}),j&&(0,b.jsx)("div",{className:"absolute inset-0 bg-white/80 dark:bg-black/80 flex items-center justify-center rounded-lg",children:(0,b.jsx)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Uploading..."})})]})]})}var i=a.i(92258),j=a.i(43108),k=a.i(41675),l=a.i(3314);let m=(0,a.i(70106).default)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);var n=a.i(50944);function o(){(0,n.useRouter)();let[a,d]=(0,c.useState)(!0),[e,g]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)("");(0,c.useEffect)(()=>{A()},[]);let A=async()=>{try{let a=await fetch("/api/profile"),b=await a.json();a.ok&&(p(b.user),r(b.user.name||""),t(b.user.email))}catch(a){console.error("Failed to fetch profile:",a)}finally{d(!1)}},B=async a=>{a.preventDefault(),g(!0);try{let a=await fetch("/api/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:q})}),b=await a.json();if(!a.ok)throw Error(b.error||"Failed to update profile");alert("Profile updated successfully!"),p(b.user)}catch(a){console.error("Update error:",a),alert(a instanceof Error?a.message:"Failed to update profile")}finally{g(!1)}},C=async a=>{if(a.preventDefault(),w!==y)return void alert("New passwords do not match");if(w.length<6)return void alert("Password must be at least 6 characters");g(!0);try{let a=await fetch("/api/profile/password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:u,newPassword:w})}),b=await a.json();if(!a.ok)throw Error(b.error||"Failed to change password");alert("Password changed successfully!"),v(""),x(""),z("")}catch(a){console.error("Password change error:",a),alert(a instanceof Error?a.message:"Failed to change password")}finally{g(!1)}};return a?(0,b.jsx)("div",{className:"p-8 flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-gray-500",children:"Loading..."})}):(0,b.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[(0,b.jsxs)("header",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Profile Settings"}),(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage your account information"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-1",children:[(0,b.jsxs)("div",{className:"bg-white dark:bg-[#111] rounded-2xl shadow-sm border border-gray-200 dark:border-[#222] p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Profile Picture"}),(0,b.jsx)(h,{currentImage:o?.profileImage,onUploadSuccess:a=>p({...o,profileImage:a}),onRemoveSuccess:()=>p({...o,profileImage:null})})]}),(0,b.jsxs)("div",{className:"bg-white dark:bg-[#111] rounded-2xl shadow-sm border border-gray-200 dark:border-[#222] p-6 mt-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Account Info"}),(0,b.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,b.jsx)("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:o?.isSuperAdmin?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m,{size:16,className:"text-yellow-500"}),(0,b.jsx)("span",{className:"font-medium text-yellow-600 dark:text-yellow-400",children:"Super Admin"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Shield,{size:16,className:"text-blue-500"}),(0,b.jsx)("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:o?.role})]})}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[(0,b.jsx)(k.Calendar,{size:16}),(0,b.jsxs)("span",{children:["Joined ",new Date(o?.createdAt).toLocaleDateString()]})]})]})]})]}),(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white dark:bg-[#111] rounded-2xl shadow-sm border border-gray-200 dark:border-[#222] p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Profile Information"}),(0,b.jsxs)("form",{onSubmit:B,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,b.jsx)(f.User,{size:16,className:"inline mr-2"}),"Name"]}),(0,b.jsx)("input",{type:"text",value:q,onChange:a=>r(a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-yellow-500 focus:border-transparent",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,b.jsx)(i.Mail,{size:16,className:"inline mr-2"}),"Email"]}),(0,b.jsx)("input",{type:"email",value:s,readOnly:!0,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-gray-100 dark:bg-[#0a0a0a] text-gray-500 dark:text-gray-400 cursor-not-allowed"}),(0,b.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Email cannot be changed for security reasons"})]}),(0,b.jsx)("button",{type:"submit",disabled:e,className:"w-full bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg font-medium transition disabled:opacity-50",children:e?"Saving...":"Save Changes"})]})]}),(0,b.jsxs)("div",{className:"bg-white dark:bg-[#111] rounded-2xl shadow-sm border border-gray-200 dark:border-[#222] p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Change Password"}),(0,b.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,b.jsx)(j.Lock,{size:16,className:"inline mr-2"}),"Current Password"]}),(0,b.jsx)("input",{type:"password",value:u,onChange:a=>v(a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-yellow-500 focus:border-transparent",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),(0,b.jsx)("input",{type:"password",value:w,onChange:a=>x(a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-yellow-500 focus:border-transparent",minLength:6,required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),(0,b.jsx)("input",{type:"password",value:y,onChange:a=>z(a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-yellow-500 focus:border-transparent",minLength:6,required:!0})]}),(0,b.jsx)("button",{type:"submit",disabled:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition disabled:opacity-50",children:e?"Changing...":"Change Password"})]})]})]})]})]})}a.s(["default",()=>o],40222)}];

//# sourceMappingURL=_9a2f8ca1._.js.map