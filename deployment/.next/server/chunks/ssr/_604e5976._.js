module.exports=[14548,a=>{"use strict";let b=(0,a.i(70106).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);a.s(["Save",()=>b],14548)},210,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},96221,a=>{"use strict";let b=(0,a.i(70106).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},33508,a=>{"use strict";let b=(0,a.i(70106).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],33508)},73320,a=>{"use strict";let b=(0,a.i(70106).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);a.s(["Upload",()=>b],73320)},94695,a=>{"use strict";let b=(0,a.i(70106).default)("layout-template",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);a.s(["LayoutTemplate",()=>b],94695)},67886,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(210),f=a.i(14548),g=a.i(94695),h=a.i(38246),i=a.i(73320),j=a.i(33508),k=a.i(96221);function l({currentVideoUrl:a,onUploadSuccess:d,onRemoveSuccess:e,label:f="Upload Video"}){let[g,h]=(0,c.useState)(!1),[l,n]=(0,c.useState)(null),[o,p]=(0,c.useState)("upload"),[q,r]=(0,c.useState)(""),s=(0,c.useRef)(null),t=async a=>{let b=a.target.files?.[0];if(b){if(!b.type.startsWith("video/"))return void n("Please upload a valid video file (MP4, MOV, etc.)");if(b.size>0x3200000)return void n("Video size must be less than 50MB");n(null),h(!0);try{let a=new FormData;a.append("file",b),a.append("folder","templates/videos");let c=await fetch("/api/upload",{method:"POST",body:a});if(!c.ok)throw Error("Upload failed");let e=await c.json();d(e.url)}catch(a){console.error(a),n("Failed to upload video. Please try again.")}finally{h(!1),s.current&&(s.current.value="")}}},u=async()=>{a&&e()};return(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:f}),!a&&(0,b.jsxs)("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[(0,b.jsx)("button",{type:"button",onClick:()=>p("upload"),className:`px-3 py-1 text-xs font-medium rounded-md transition ${"upload"===o?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Upload"}),(0,b.jsx)("button",{type:"button",onClick:()=>p("url"),className:`px-3 py-1 text-xs font-medium rounded-md transition ${"url"===o?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Link"})]})]}),l&&(0,b.jsxs)("div",{className:"mb-3 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg flex items-center gap-2",children:[(0,b.jsx)(j.X,{size:16})," ",l]}),a?(0,b.jsxs)("div",{className:"relative rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700 bg-black group",children:[(0,b.jsx)("video",{src:a,className:"w-full h-48 object-cover",controls:!0,playsInline:!0,preload:"metadata"}),(0,b.jsx)("div",{className:"absolute top-2 right-2 flex gap-2",children:(0,b.jsx)("button",{onClick:u,type:"button",className:"p-2 bg-red-500 text-white rounded-lg shadow-lg hover:bg-red-600 transition",title:"Remove video",children:(0,b.jsx)(m,{size:16})})}),(0,b.jsx)("div",{className:"absolute bottom-2 left-2 bg-black/50 text-white text-xs px-2 py-1 rounded backdrop-blur-sm truncate max-w-[200px]",children:a.split("/").pop()})]}):"upload"===o?(0,b.jsx)("div",{onClick:()=>s.current?.click(),className:`
                        border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl p-8
                        flex flex-col items-center justify-center cursor-pointer transition-all
                        hover:border-yellow-500 hover:bg-yellow-50 dark:hover:bg-yellow-900/10
                        ${g?"opacity-50 pointer-events-none":""}
                    `,children:g?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.Loader2,{size:32,className:"text-yellow-600 animate-spin mb-3"}),(0,b.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Uploading..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center text-yellow-600 mb-3",children:(0,b.jsx)(i.Upload,{size:24})}),(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Click to upload video"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"MP4, MOV up to 50MB"})]})}):(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"url",placeholder:"Enter video URL (e.g. from ImageKit)",value:q,onChange:a=>r(a.target.value),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-[#0a0a0a] text-sm focus:ring-2 focus:ring-yellow-500 focus:border-transparent"}),(0,b.jsx)("button",{type:"button",onClick:a=>{a.preventDefault(),q&&(d(q),r(""))},disabled:!q,className:"px-4 py-2 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-lg text-sm font-medium hover:opacity-90 disabled:opacity-50 transition",children:"Add"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Paste a direct link to a video file (.mp4, .mov)"})]}),(0,b.jsx)("input",{type:"file",ref:s,onChange:t,accept:"video/*",className:"hidden"})]})}function m({size:a,className:c}){return(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:a||24,height:a||24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:c,children:[(0,b.jsx)("path",{d:"M3 6h18"}),(0,b.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),(0,b.jsx)("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),(0,b.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,b.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}function n(){let a=(0,d.useRouter)(),i=(0,d.useParams)().id,[j,k]=(0,c.useState)(!0),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)({name:"",description:"",previewUrl:"",introVideoUrl:"",transitionVideoUrl:"",backgroundVideoUrl:"",effectLayerUrl:"",effectLayerOpacity:1,effectLayerBlendMode:"screen",isActive:!0});(0,c.useEffect)(()=>{s()},[i]);let s=async()=>{try{let b=await fetch(`/api/admin/templates/${i}`),c=await b.json();b.ok?(p(c.template),r({name:c.template.name,description:c.template.description||"",previewUrl:c.template.previewUrl||"",introVideoUrl:c.template.introVideoUrl||"",transitionVideoUrl:c.template.transitionVideoUrl||"",backgroundVideoUrl:c.template.backgroundVideoUrl||"",effectLayerUrl:c.template.effectLayerUrl||"",effectLayerOpacity:c.template.effectLayerOpacity??1,effectLayerBlendMode:c.template.effectLayerBlendMode||"screen",isActive:c.template.isActive})):(alert("Failed to load template"),a.push("/admin/templates"))}catch(a){console.error("Failed to fetch template:",a)}finally{k(!1)}},t=async b=>{b.preventDefault(),n(!0);try{let b=await fetch(`/api/admin/templates/${i}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)}),c=await b.json();if(!b.ok)throw Error(c.error||"Failed to update template");alert("Template updated successfully!"),a.push("/admin/templates")}catch(a){console.error("Update template error:",a),alert(a instanceof Error?a.message:"Failed to update template")}finally{n(!1)}};return j?(0,b.jsx)("div",{className:"p-8 flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-gray-500",children:"Loading..."})}):(0,b.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsxs)(h.default,{href:"/admin/templates",className:"inline-flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition",children:[(0,b.jsx)(e.ArrowLeft,{size:20}),"Back to Templates"]})}),(0,b.jsxs)("header",{className:"mb-8 flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Edit Template"}),(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Update template assets and details"})]}),(0,b.jsxs)("div",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-800 rounded-lg text-sm font-mono text-gray-500",children:["ID: ",o?.codeKey]})]}),(0,b.jsx)("div",{className:"bg-white dark:bg-[#111] rounded-2xl shadow-sm border border-gray-200 dark:border-[#222] p-6",children:(0,b.jsxs)("form",{onSubmit:t,className:"space-y-8",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Template Name"}),(0,b.jsx)("input",{type:"text",value:q.name,onChange:a=>r({...q,name:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-yellow-500 focus:border-transparent",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),(0,b.jsxs)("label",{className:"flex items-center gap-3 p-2 border border-gray-300 dark:border-gray-700 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-[#1a1a1a]",children:[(0,b.jsx)("input",{type:"checkbox",checked:q.isActive,onChange:a=>r({...q,isActive:a.target.checked}),className:"w-5 h-5 text-yellow-600 rounded focus:ring-yellow-500"}),(0,b.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Active (Visible to users)"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),(0,b.jsx)("textarea",{value:q.description,onChange:a=>r({...q,description:a.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-yellow-500 focus:border-transparent"})]}),(0,b.jsx)("div",{className:"border-t border-gray-200 dark:border-[#222] my-6"}),(0,b.jsxs)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,b.jsx)(g.LayoutTemplate,{size:20,className:"text-yellow-600"}),"Video Assets"]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,b.jsx)(l,{label:"Intro Video (First Screen)",currentVideoUrl:q.introVideoUrl,onUploadSuccess:a=>r(b=>({...b,introVideoUrl:a})),onRemoveSuccess:()=>r(a=>({...a,introVideoUrl:""}))}),(0,b.jsx)(l,{label:"Transition Video (Middle)",currentVideoUrl:q.transitionVideoUrl,onUploadSuccess:a=>r(b=>({...b,transitionVideoUrl:a})),onRemoveSuccess:()=>r(a=>({...a,transitionVideoUrl:""}))}),(0,b.jsx)(l,{label:"Background Video (Second Screen)",currentVideoUrl:q.backgroundVideoUrl,onUploadSuccess:a=>r(b=>({...b,backgroundVideoUrl:a})),onRemoveSuccess:()=>r(a=>({...a,backgroundVideoUrl:""}))}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(l,{label:"Visual Effect Layer (Overlay)",currentVideoUrl:q.effectLayerUrl,onUploadSuccess:a=>r(b=>({...b,effectLayerUrl:a})),onRemoveSuccess:()=>r(a=>({...a,effectLayerUrl:""}))}),q.effectLayerUrl&&(0,b.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-[#1a1a1a] rounded-lg border border-gray-200 dark:border-[#333] space-y-4",children:[(0,b.jsx)("h4",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:"Effect Settings"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,b.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Opacity"}),(0,b.jsxs)("span",{className:"text-xs font-mono text-gray-500",children:[Math.round(100*q.effectLayerOpacity),"%"]})]}),(0,b.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:q.effectLayerOpacity,onChange:a=>r(b=>({...b,effectLayerOpacity:parseFloat(a.target.value)})),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 accent-yellow-600"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Blend Mode"}),(0,b.jsxs)("select",{value:q.effectLayerBlendMode,onChange:a=>r(b=>({...b,effectLayerBlendMode:a.target.value})),className:"w-full px-3 py-1.5 text-sm bg-white dark:bg-[#0a0a0a] border border-gray-300 dark:border-gray-700 rounded-md focus:ring-1 focus:ring-yellow-500 focus:outline-none",children:[(0,b.jsx)("option",{value:"screen",children:"Screen (Best for Black BG)"}),(0,b.jsx)("option",{value:"overlay",children:"Overlay"}),(0,b.jsx)("option",{value:"lighten",children:"Lighten"}),(0,b.jsx)("option",{value:"plus-lighter",children:"Plus Lighter"}),(0,b.jsx)("option",{value:"normal",children:"Normal"}),(0,b.jsx)("option",{value:"multiply",children:"Multiply (Darken)"})]})]})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-6 border-t border-gray-200 dark:border-[#222]",children:[(0,b.jsx)("button",{type:"button",onClick:()=>a.back(),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#1a1a1a] transition",children:"Cancel"}),(0,b.jsxs)("button",{type:"submit",disabled:m,className:"flex-1 bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg font-medium transition disabled:opacity-50 flex items-center justify-center gap-2",children:[(0,b.jsx)(f.Save,{size:18}),m?"Saving Changes...":"Save Template"]})]})]})})]})}a.s(["default",()=>n],67886)}];

//# sourceMappingURL=_604e5976._.js.map